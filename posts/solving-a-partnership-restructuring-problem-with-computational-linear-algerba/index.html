<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Solving a partnership restructuring problem with linear algebra and Markov processes.</title><meta name=description content="The website of Daniel Furman"><meta name=author content="Daniel Furman"><link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@400;700&display=swap" rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2 crossorigin=anonymous><link rel=stylesheet href=/sass/researcher.min.css><link rel=icon type=image/ico href=https://daniel-furman.github.io/favicon.ico></head><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css integrity=sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js integrity=sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4 crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js integrity=sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa crossorigin=anonymous onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}]})})</script><body><div class="container mt-5"><nav class="navbar navbar-expand-sm flex-column flex-sm-row text-nowrap p-0"><a class="navbar-brand mx-0 mr-sm-auto" href=https://daniel-furman.github.io/>Daniel Furman</a><div class="navbar-nav flex-row flex-wrap justify-content-center"><a class="nav-item nav-link" href=/>About</a>
<span class="nav-item navbar-text mx-1">/</span>
<a class="nav-item nav-link" href=/posts>Posts</a>
<span class="nav-item navbar-text mx-1">/</span>
<a class="nav-item nav-link" href=/bookshelf>Bookshelf</a>
<span class="nav-item navbar-text mx-1">/</span>
<a class="nav-item nav-link" href=/resume>Resume</a>
<span class="nav-item navbar-text mx-1">/</span>
<a class="nav-item nav-link" href=/contact>Contact</a></div></nav></div><hr><div id=content><div class=container><p><br><br></p><h2 id=solving-a-partnership-restructuring-problem-with-linear-algebra-and-markov-processes>Solving a partnership restructuring problem with linear algebra and Markov processes.</h2><hr><p>Consider a partnership restructuring its assets. The N partners currently share each of the M assets at a particular percentage stake. The assets carry both a value and a debt. Our task is to re-distribute the assets such that each is under majority ownership by a single partner. Critically, we need to divvy the assets without altering the overall value and debt under each partner&rsquo;s stake. In effect, we want to split up the partnership fairly so that nobody gains or loses stake in the business.</p><p>Linear algebra - to the rescue! We can explore the restructuring possibilities by turning the problem into a system of matrix operations and permuting across all the different asset ownership scenarios.</p><p>First, create an NxM matrix encoding the restructured shares, for example, partner N1 gets 100% of asset M1, 0% of asset M2, and so on. Each row represents a partner, each column represents an asset. As expected, each column must sum to one, hence the matrix is a probability matrix. If we think of each new structuring as a state, we are very much in the realm of <a href=https://en.wikipedia.org/wiki/Markov_decision_process>Markov processes</a>. We then multiply the NxM probability matrix with an Mx2 matrix encoding each of the assets' values and the debts. Subtract the result from the current ownership shares (a Nx2 matrix), making sure that the rows match up to the correct partner rows in the original probability matrix. Finally, we take the absolute values and sum the entries. Our result encodes the cumulative difference between the restructured partnership and the original ownerships.</p><h2 id=right>$$
sum(abs(
\left[
\begin{array}{cccccc}
1 & 0 & 0 & 1 & 0 & 0 \<br>0 & 1 & 0 & 0 & 1 & 0\<br>0 & 0 & 1 & 0 & 0 & 1
\end{array}
\right]
\left[
\begin{array}{cc}
val_1 & debt_1 \<br>val_2 & debt_2 \<br>val_3 & debt_3 \<br>val_4 & debt_4 \<br>val_5 & debt_5 \<br>val_6 & debt_6
\end{array}
\right]</h2><p>\left[
\begin{array}{cc}
N_{1val} & N_{1debt} \<br>N_{2val} & N_{2debt} \<br>N_{3val} & N_{3debt}
\end{array}
\right]
))
$$</p><p><strong>Figure 1</strong>. System of matrix operations for a partnership with 6 assets and 3 partners. The first matrix is the probability Markov matrix, the second is the values/debts of each asset, and the third is the partner&rsquo;s total current ownership values/debts.</p><p>The critical step in the algorithm is to then shuffle the columns, re-run the system of matrix operations, and record the next cumulative difference. We do this for all permutations of the column indices, search for the minimum difference (which may turn up more than once, if repeated permutations exist), and voila, we have an &ldquo;optimal&rdquo; solution.</p><h3 id=how-close-can-we-get-to-the-original-partnership>How close can we get to the original partnership?</h3><hr><p>Why was optimal in quotes above? Well, after all that, our result many turn out to be, well, not so great. Consider a simplified case: 2 partners evenly share 3 assets, but the assets are all equivalent, and, therefore, there is no way to split up the assets into majority stake ownerships.</p><p>Another unattractive feature of our methodology was that we preemptively chose how many assets in total went to each partner, a step in the analytics pipeline that requires experimenting with. Some intuition must go into this initial decision after examining the original ownership stakes and the assets' values and debts.</p><h3 id=when-does-this-functions-run-time-become-unwieldy>When does this function&rsquo;s run-time become unwieldy?</h3><hr><p>This approach is certainly a brute force method, as we are testing across all the possible scenarios. I wouldn&rsquo;t want to run these calculations for more than a dozen or so assets, as the runtime would become quite large. The for loops should decompose roughly to a <a href=http://web.mit.edu/16.070/www/lecture/big_o.pdf>O(n) time complexity</a>. For example, if we have 11 assets (11! ~40 mill states), the runtime is approximately ten minutes on Google Colab&rsquo;s CPU.</p><p>$$runtime \propto n^{0.966}$$</p><p align=center><img src=/posts/assets-runtime.png / width=550 height=366></p><p><strong>Figure 2</strong>. Run-time complexity analysis for the restructuring algorithm (in log/log space). The power law relationship exhibits a n ~ 0.996 slope, indicating the linearity in the algorithm&rsquo;s time complexity (i.e., O(n)).</p><h3 id=code>Code</h3><hr><p align=center><img src=/posts/assets-code.png / width=550 height=636></p></div></div><div id=footer class=mb-5><hr><div class="container text-center"><a href=https://daniel-furman.github.io/><small>By Daniel Furman</small></a></div></div></body></html>